Start Arduino and open Preferences window.
Enter http://arduino.esp8266.com/stable/package_esp8266com_index.json into Additional Board Manager URLs field. You can add multiple URLs, separating them with commas.
![](img/ru/00_arduino_preferences.jpg)

Open Boards Manager from Tools > Board menu and install esp8266 platform 
![](img/ru/00_arduino_board_manager_install.png)

Select your Wemos D1 R1 board from Tools > Board menu after installation
![](img/ru/00_arduino_select_board.png)

Install library from
https://github.com/knolleary/pubsubclient