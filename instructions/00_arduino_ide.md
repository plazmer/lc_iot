Start Arduino and open Preferences window.
Enter http://arduino.esp8266.com/stable/package_esp8266com_index.json into Additional Board Manager URLs field. You can add multiple URLs, separating them with commas.
![](img/ru/00_arduino_preferences.jpg)

Open Boards Manager from Tools > Board menu and install esp8266 platform 
![](img/ru/00_arduino_board_manager_install.png)



Install library from
https://github.com/knolleary/pubsubclient

Для подготовки к работе сначала зальем простую программу, в терминах Ардуино она называется "скетч" для проверки работоспособности системы и правильности настроек.
Готовый код можно получить из среды Ардуино:
File/Examples/ESP8266/Blink
![](img/en/00_Blink_01.png)

Получившийся результат должен выглядеть примерно так:
![](img/en/00_Blink_02.png)

А готовый к работе контроллер с подключенным USB кабелем так:
![](img/en/00_Blink_03.jpg)

После подключения контроллера к компьютеру могут потребоваться дополнительные драйвера, в этом случае инструктор подскажет, что делать.

Когда всё установлено и настроено, надо
1. Выбрать нужную плату из настроек - меню Tools > Board
![](img/en/00_arduino_select_board.png)

2. Выбрать COM порт. Если там их два, то выбрать с максимальным номером.
![](img/en/00_arduino_select_port.png)

3. Нажать кнопку Upload для компиляции и записи программы на контроллер.
![](img/en/00_Blink_04.png)

4. Если всё прошло хорошо и нет сообщений об ошибке, то скетч записался в память контроллера, а синий светодиод на нём стал периодически мигать
![](img/en/00_Blink_05.png)

## Переходим к MQTT
Wikipedia: MQTT (англ. message queuing telemetry transport) — упрощённый сетевой протокол, работающий поверх TCP/IP, ориентированный для обмена сообщениями между устройствами по принципу издатель-подписчик.
Протокол ориентируется на простоту в использовании, невысокую нагрузку на каналы связи, работу в условиях постоянной потери связи, лёгкую встраиваемость в любую систему. Основное предназначение — работа с телеметрией от различных датчиков, устройств, использование шаблона подписчика обеспечивает возможность устройствам выходить на связь и публиковать сообщения, которые не были заранее известны или предопределены, в частности, протокол не вводит ограничений на формат передаваемых данных.

Работает поверх протокола TCP, это обеспечивает более надежную доставку сообщений (или информацию о том, что не доставлено).
Требует установки соединения по сети, для установленного соединения используется две операции - SUBSCRIBE и PUBLISH.

Основная единица хранения информации - топики, которые могут быть вложены друг в друга (субтопики). В топик можно опубликовать (PUBLISH) люой пакет информации и он будет доставлен всем, кто подписался (SUBSCRIBE) на этот топик.
Подробнейшая информация - http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/mqtt-v3.1.1.html - на момент публикации этой инструкции

Поверх этого механизма и будет работать наша система.
Все контроллеры получают доступ к интернету по Wi-Fi, соединяются с MQTT сервером, подписываются на отдельные топики и/или публикуют в топики информацию.
Управляющий сервер также подписывается на нужные топики и может по наступлению определённых событий публиковать в топики информацию или отправлять оповещения через интернет каким-либо способом.

Для смартфона под управлением Android есть приложения:
	
Linear MQTT Dashboard
https://play.google.com/store/apps/details?id=com.ravendmaster.linearmqttdashboard

MQTT Dash
https://play.google.com/store/apps/details?id=net.routix.mqttdash

Для смартфона под управлением IOS есть приложения:
# TODO

